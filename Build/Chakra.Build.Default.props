<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <NtTargetVersion_Win7 >0x601</NtTargetVersion_Win7>
    <NtTargetVersion_Win8 >0x602</NtTargetVersion_Win8>
    <NtTargetVersion_Win10>0xA00</NtTargetVersion_Win10>
  </PropertyGroup>
  <Import Project="Common.Build.Default.props"/>  
  <PropertyGroup>
    <PlatformToolset Condition="'$(VisualStudioVersion)'=='11.0'">v110</PlatformToolset>
    <PlatformToolset Condition="'$(VisualStudioVersion)'=='12.0'">v120</PlatformToolset>
    <PlatformToolset Condition="'$(VisualStudioVersion)'=='14.0'">v140</PlatformToolset>
  </PropertyGroup>
  <PropertyGroup>
    <!-- PlatformPathName is used in OutDir/IntDir name-->
    <PlatformPathName>$(Platform)</PlatformPathName>
    <PlatformPathName Condition="'$(Platform)'=='Win32'">x86</PlatformPathName>
    <!-- PlatformPathNameAlt is used by Backend for architecture directory -->
    <PlatformPathNameAlt>$(Platform)</PlatformPathNameAlt>
    <PlatformPathNameAlt Condition="'$(Platform)'=='Win32'">i386</PlatformPathNameAlt>
    <PlatformPathNameAlt Condition="'$(Platform)'=='x64'">amd64</PlatformPathNameAlt>

    <WindowsTargetPlatformVersion Condition="'$(Platform)'=='ARM'">10.0.10240.0</WindowsTargetPlatformVersion>
    
    <!-- Always use Platform SDK for core builds -->
    <EventManifestXmlPath>$(WindowsSDK80Path)Include\um</EventManifestXmlPath>
  </PropertyGroup>
  <ImportGroup>
    <Import Project="$(ChakraDevConfigDir)\Chakra.Build.user.props" Condition="exists('$(ChakraDevConfigDir)\Chakra.Build.user.props')"/>
  </ImportGroup>
  <!-- Output Path -->
  <PropertyGroup>
    <OutBaseDir Condition="'$(OutBaseDir)'!=''">$(OutBaseDir)\$(SolutionName)</OutBaseDir>
    <OutBaseDir Condition="'$(OutBaseDir)'=='' AND '$(TF_BUILD_BINARIESDIRECTORY)'!=''">$(TF_BUILD_BINARIESDIRECTORY)</OutBaseDir>
    <OutBaseDir Condition="'$(OutBaseDir)'==''">$(SolutionDir)VcBuild</OutBaseDir>
    <IntBaseDir Condition="'$(IntBaseDir)'=='' AND '$(TF_BUILD_BUILDDIRECTORY)'!=''">$(TF_BUILD_BUILDDIRECTORY)</IntBaseDir>
    <IntBaseDir Condition="'$(IntBaseDir)'==''">$(OutBaseDir)</IntBaseDir>
    <OutDir>$(OutBaseDir)\bin\$(PlatformPathName.ToLower())_$(Configuration.ToLower())\</OutDir>    
    <IntDir>$(IntBaseDir)\obj\$(PlatformPathName.ToLower())_$(Configuration.ToLower())\$(MSBuildProjectName)\</IntDir>
    <OutDir Condition="'$(ConfigurationType)'=='StaticLibrary'">$(IntDir)</OutDir>
    <OutputPath>$(OutDir)</OutputPath>

    <ChakraParserIntDir>$(IntDir)..\Chakra.Parser</ChakraParserIntDir>
  </PropertyGroup>

  <PropertyGroup>
    <!-- Real branch name? -->
    <BranchName>chakracore</BranchName>
    <BuildMachine>$(BranchName)</BuildMachine>
    <BuildMachine Condition="'$(OfficialBuild)'!='true'">$(BuildMachine)($(UserName))</BuildMachine>
    <BuildDate>$([System.DateTime]::Now.ToString("yyMMdd-hhmm"))</BuildDate>
  </PropertyGroup>

  <PropertyGroup>
    <USE_EXTERNAL_DEPENDENCIES>yes</USE_EXTERNAL_DEPENDENCIES>
  </PropertyGroup>
</Project> 
